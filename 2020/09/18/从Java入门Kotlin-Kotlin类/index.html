<!DOCTYPE html>
<html lang="cn">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

<!--ＪQuery-->
<script src="/Module/JQuery/jquery.min.js"></script>

<!--Vue.js-->
<script src="/Module/vue/vue.js"></script>
<!--饿了么Ｕi-->
<link rel="stylesheet" href="/Module/ElementUi/css/index.css">
<script src="/Module/ElementUi/index.js"></script>

<!--highlight-->
<link rel="stylesheet" href="/Module/highlight/css/zenburn.css">
<script src="/Module/highlight/highlight.min.js"></script>

<!--axios-->
<script src="/Module/axios/axios.min.js"></script>

<!--评论-->
<script src="/Module/comment/valine/Valine.min.js"></script>

<!--主题样式-->
<link rel="stylesheet" href="/Module/style.css">

<!--设置页面描述与关键字,封面图片-->

    <meta name="description" content="Java作为一门面向对象的语言，需要所有的代码都是以类为基础的，我们每次写Java代码的时候第一件事情就是先新建一个类，所以我们从Java入门Kotlin系列教程就先从类入手，看一下Kotlin是怎么新建和处理一个类的，让我们开始吧~" />
    <meta name="keywords" content="" />
    <title>从Java入门Kotlin-Kotlin类</title>
    
    <style>
        #content #title {
            background-image: url('/background.jpg');
        }
    </style>
    

</head>
<body>
    <div id="app" v-cloak>
    <div id="content">
        <el-button type="text" id="nav" icon="el-icon-tickets" @click="visible = !visible"></el-button>
<el-dialog :visible.sync="visible"  title="前往">
    <el-input id="searchInput" v-model="input" placeholder="请输入内容"></el-input>
    <div id="searchResult"></div>

    <br>
    <div id="Menu">
      <div class="grid-content bg-purple"><el-button><el-link :underline="false" href="/">首页</el-link></el-button></div>
      <div class="grid-content bg-purple"><el-button><el-link :underline="false" href="/archive/">归档</el-link></el-button></div>
      <div class="grid-content bg-purple"><el-button><el-link :underline="false" href="/about/">关于</el-link></el-button></div>
      <div class="grid-content bg-purple"><el-button><el-link :underline="false" href="/ly/">留言</el-link></el-button></div>
      <div class="grid-content bg-purple"><el-button><el-link :underline="false" href="/categories/">分类</el-link></el-button></div>
      <div class="grid-content bg-purple"><el-button><el-link :underline="false" href="/tages/">标签</el-link></el-button></div>
    </div>

</el-dialog>

<el-link href="#top"  id="toTop" class="show" :underline="false" icon="el-icon-top" ></el-link>



        
        <div id="title">
            <h1>
                从Java入门Kotlin-Kotlin类<br>
                
                <p>作者：wz<br>编写：2020-09-18</p>
            </h1>
        </div>
        

        <div id="article">
            <meta name="referrer" content="no-referrer">

<blockquote>
<p>​        介于是Kotlin系列的第一篇文章，按照惯例应该先吹一波Kotlin怎么怎么好，我觉着这个事情还是等教程结束再来谈，到时候会单独出一篇文章，现在只知道是Better Java就可以了。</p>
<p>​        我是因为工作原因—公司项目大部分是Kotlin，才接触然后学习的Kotlin，我觉着现在提起Kotlin大家的第一反应应该是安卓开发，确实Kotlin在安卓领域占有绝对的优势，但对于我们服务端来说Kotlin占的份额还是很小的，像我们公司服务端全转换用Kotlin的就更少之又少了，经过一段时间的学习和使用，逐渐觉着Kotlin已经有能力担任我们服务端的开发，并且在我们公司已经正常稳定运行了很久了，代码也相比之前优雅了许多，所以我也想为Kotlin的普及做出一小份力，从一个从前Java服务端出发，对比Java和Kotlin的异同，来入门这款优秀的语言。介于我的Java水平和Kotlin水平都有限，文章有错误或不对的地方希望大家不吝指教，我们一块探讨。</p>
</blockquote>
<h3 id="类声明"><a href="#类声明" class="headerlink" title="类声明"></a>类声明</h3><p>Java和Kotlin单从类声明上说从表面上看上去是没有什么差别的</p>
<p>Java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnimalJava</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimalKotlin</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但其实他们之间是有不小的区别的：Java允许创建任意类的子类并重写任意方法，除非显式的去定义成<em>final</em>，这其实是容易造成问题的，基类的代码修改容易使其不符合在子类中的假设。所以Kotlin中为了避免这个问题的发生，Kotlin中的类默认都是<em>final</em>的，如果允许被继承，则需要使用<em>open</em>这个修饰符。</p>
<p>需要注意的是：在Spring中全部定义为final是不方便的，因为这样的话，Spring的代理就不好使了，所以在Spring中使用Kotlin的时候我们一般会使用一个叫All-Open的插件，它会自动为Spring使用open类的地方加上open，而不用代码中写很多open</p>
<h3 id="类成员变量"><a href="#类成员变量" class="headerlink" title="类成员变量"></a>类成员变量</h3><p>了解先来看下Java和Kotlin类中成员变量的定义</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnimalJava</span> </span>&#123;</span><br><span class="line">  String name;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimalKotlin</span> </span>&#123;</span><br><span class="line">    var name: String = <span class="string">""</span> <span class="comment">// 或者 val name: String = ""</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中Java中的name默认的是private，如果外部需要访问这个成员变量是需要显式调用name的get和set方法的，而Kotlin中默认的是public，需要一个默认值，并且Kotlin中区分了val和var，外部访问和赋值是不需要显式调用get和set方法。</p>
<p>不知道大家有没有对Java中成员变量设成private，然后提供get和set方法有过好奇，我查着大概说是为了风中的特性来将数据与行为进行分离。而Kotlin中则直接是一个public的成员变量，岂不是直接破坏了Java中的封装的特性，其实这里Kotlin并没有：Kotlin中也是可以使用get和set的，当我们不定义的话相当于使用默认的get和set，我们也可以显式自定义get和set，如下：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimalKotlin</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: String = <span class="string">""</span></span><br><span class="line">  	<span class="comment">//不写的话默认是这个样子的，其中field是一个幕后字段代表着name</span></span><br><span class="line">    <span class="keyword">set</span>(value) &#123; field = value &#125;</span><br><span class="line">    <span class="keyword">get</span>() &#123;<span class="keyword">return</span> field&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> animal = AnimalKotlin()</span><br><span class="line">  	<span class="comment">//这里看似是直接赋值，其实是调用了set方法</span></span><br><span class="line">    animal.name = <span class="string">"dog"</span></span><br><span class="line">    print(animal.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看完上面我说的是不是感觉好像是有什么黑魔法一样，全是我自己根据表象进行猜测的，口说无凭，我们直接把看一下上面代码的字节码转成Java之后的代码是什么样子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">AnimalKotlin</span> </span>&#123;</span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">private</span> String name = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(@NotNull String value)</span> </span>&#123;</span><br><span class="line">      Intrinsics.checkParameterIsNotNull(value, <span class="string">"value"</span>);</span><br><span class="line">      <span class="keyword">this</span>.name = value;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">AnimalKotlinKt</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      AnimalKotlin animal = <span class="keyword">new</span> AnimalKotlin();</span><br><span class="line">      animal.setName(<span class="string">"dog"</span>);</span><br><span class="line">      String var1 = animal.getName();</span><br><span class="line">      <span class="keyword">boolean</span> var2 = <span class="keyword">false</span>;</span><br><span class="line">      System.out.print(var1);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// $FF: synthetic method</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] var0)</span> </span>&#123;</span><br><span class="line">      main();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这下是不是全都明白了，其实跟Java是一样的，只是当我们使用的时候方便了许多，Kotlin去除了很多模板代码，使代码写起来更方便，如果我想让set或者get私有只需要下面这样处理就可以：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimalKotlin</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: String = <span class="string">""</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样set方法就是私有了，此时<em>animal.name = “dog”</em>这个是会报错的因为其实就是调用了set方法。</p>
<p>当我们使用的不是var而是val的时候，此时只会有get没有set</p>
<blockquote>
<p>拓展：成员变量中对null的处理，Kotlin为了解决Java中null的困扰，从源头控制，比如我们例子中<em>var name: String = “”</em>，这样name无论如何都不会为null，当我们使用<em>var name: String? = “”</em>的时候此时name就有可能为null，我们用这个属性的时候就要进行null判断，后面我们会详细介绍null的处理</p>
</blockquote>
<p>讲到这里我们会发现，每个类的属性都会有默认值，我们不想设置默认值怎么办，这里有两个方法：</p>
<p>其一：作为主构造函数参数（下面要讲），</p>
<p>其二：使用<em>lateinit</em>，他的意思是延迟初始化，如下：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimalKotlin</span> </span>&#123;</span><br><span class="line">    <span class="keyword">lateinit</span> <span class="keyword">var</span> name: String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种使用最多的场景是在spring中的@Autowire，这个还是要记住的，以后会常用</p>
<p>如上关于类中的属性基本就介绍完了，还有一个知识点是委托属性，这个以后再说，刚开始讲不太好接受</p>
<h4 id="类的构造"><a href="#类的构造" class="headerlink" title="类的构造"></a>类的构造</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnimalJava</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnimalJava</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnimalJava</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Java中的类构造如上面所示，其中包含了一个无参构造方法和一个有参构造方法</p>
   
            <br>
            <hr><br>
            
                <div id="article-previous">
                    <a href="/2020/10/28/PostgreSQL-从MySQL到PostgreSQL一些习惯用法的解决方案/" data-toggle="tooltip" data-placement="top" title="PostgreSQL-从MySQL到PostgreSQL一些习惯用法的解决方案">&larr; 上一篇</a>
                </div>
                
                
                <div id="article-next">
                    <a href="/2020/08/01/Spring-Bean的注入/" data-toggle="tooltip" data-placement="top" title="Spring Bean的注入">下一篇 &rarr;</a>
                </div>
            
            <br><br>
            <hr>
        </div>
    </div>

    <div id="comment">
        
        
    <h2>留言</h2>
    <div id="vcomments">
    </div>
    <script>
        var valine = new Valine({
        el: '#vcomments', 
        appId: 'HfM9lGHkjvrCY4Y00sfk4TbY-gzGzoHsz',
        appKey: 'yzGGVla3JWB1CeQ6dIECEGVc',
    
        emojiCDN: 'https://i0.hdslb.com/bfs/emote/', 
        emojiMaps: {
          "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
          "tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
          "tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
          "tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
          "tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
          "tv_发怒": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
          "tv_发财": "34db290afd2963723c6eb3c4560667db7253a21a.png",
          "tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
          "tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png",
          "tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
          "tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
          "tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
          "tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
          "tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
          "tv_大哭": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
          "tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
          "tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
          "tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
          "tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
          "tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
          "tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
        }
    })
    </script>

    
    
    
     
    </div>
</div>
    <script src="/Module/main.js"></script>
</body>
</html>